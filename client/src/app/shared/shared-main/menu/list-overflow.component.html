<div #itemsParent class="list-overflow-parent" [ngClass]="{ 'opacity-0': !initialized }">

  <ul class="ul-unstyle d-flex">
    <li class="d-inline-block" *ngFor="let item of items; index as id" [id]="getId(id)" #itemsRendered>
      <ng-container *ngTemplateOutlet="itemTemplate; context: {item: item}"></ng-container>
    </li>
  </ul>

  @if (isMenuDisplayed()) {
    @if (isInMobileView) {
      <button type="button" class="peertube-button tertiary-button list-overflow-menu" (click)="toggleModal()">
        <span class="chevron-down"></span>
      </button>
    } @else {
      <div class="list-overflow-menu" ngbDropdown container="body" #dropdown="ngbDropdown">
        <button class="peertube-button tertiary-button p-0" ngbDropdownToggle type="button">
          <span class="chevron-down"></span>
        </button>

        <ul class="ul-unstyle" ngbDropdownMenu>
          <li *ngFor="let item of items | slice:showItemsUntilIndexExcluded:items.length">
            <a [routerLink]="item.routerLink" routerLinkActive="active" class="dropdown-item">
              {{ item.label }}
            </a>
          </li>
        </ul>
      </div>
    }
  }
</div >

<ng-template #modal let-close="close" let-dismiss="dismiss">
  <div class="modal-body">
    <ul class="ul-unstyle">
      <li *ngFor="let item of items | slice:showItemsUntilIndexExcluded:items.length">
        <a [routerLink]="item.routerLink" routerLinkActive="active" (click)="dismissOtherModals()">
          {{ item.label }}
        </a>
      </li>
    </ul>
  </div>
</ng-template>
